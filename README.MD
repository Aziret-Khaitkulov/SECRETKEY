# SecretKey - Сервис для безопасного хранения секретов

SecretKey — это веб-приложение, созданное с использованием **FastAPI**, которое позволяет безопасно хранить и одноразово получать секреты. Секреты шифруются и удаляются после первого доступа или по истечении времени жизни (TTL).

## Функциональность

- **Создание секрета**: Пользователь может сохранить секрет с указанием времени жизни (TTL) и пароля для шифрования.
- **Получение секрета**: Секрет можно получить только один раз, после чего он удаляется.
- **Удаление секрета**: Пользователь может удалить секрет вручную.
- **Логирование событий**: Все действия (создание, получение, удаление) логируются с указанием IP-адреса клиента.
- **Запрет на кеширование со стороны клиента**: Добавление HTTP-заголовков, запрещающих кеширование на стороне клиента и прокси.


## Технологии

- **Backend**: FastAPI
- **Database**: PostgreSQL
- **Caching**: Встроенный кэш для временного хранения секретов
- **Docker**: Контейнеризация приложения
- **ORM**: SQLAlchemy
- **Middleware**: Для запрета клиентского кеширования.


## Установка и запуск

### Локальный запуск

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-repo/secretkey.git
   cd secretkey
   ```
2. Установите зависимости:
    ```
    pip install -r requirements.txt
    ```
3. Запустите приложение:
    ```
    uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
    ```
4. Приложение будет доступно по адресу: http://localhost:8000

## Запуск через Docker Compose
1. Запустите приложение:
    ```
    docker-compose up --build
    ```
2. Приложение будет доступно по адресу: http://localhost:8000

## Эндпоинты
1. Создание секрета

    URL: /secrets

    Метод: POST

    Тело запроса:
    ```
    {
    "secret": "Ваш секрет",
    "passphrase": "Пароль для шифрования",
    "ttl": 300
    }
    ```

    Ответ:

    ```
    {
    "secret_key": "уникальный_ключ"
    }
    ```

2. Получение секрета

    URL: /secrets/{secret_key}

    Метод: GET

    Ответ:
    ```
    {
    "secret": "Ваш секрет",
    }
    ```

    ```
3. Удаление секрета

    URL: /secrets/{secret_key}

    Метод: DELETE

    Ответ:
    ```
    {
    "status": "Секрет успешно удалён.",
    }
    ```

## Лицензия

Этот проект распространяется под лицензией MIT. Подробнее см. [LICENSE](LICENSE).
